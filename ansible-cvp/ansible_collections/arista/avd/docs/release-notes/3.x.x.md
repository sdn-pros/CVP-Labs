# Release Notes for Ansible AVD 3.x.x

- Documentation for AVD version `3.8.x` [available here](https://www.avd.sh/en/releases-v3.8.x/)
- Documentation for AVD version `3.7.0` [available here](https://www.avd.sh/en/v3.7.0/)
- Documentation for AVD version `3.6.0` [available here](https://www.avd.sh/en/v3.6.0/)
- Documentation for AVD version `3.5.0` [available here](https://www.avd.sh/en/v3.5.0/)
- Documentation for AVD version `3.4.0` [available here](https://www.avd.sh/en/v3.4.0/)
- Documentation for AVD version <= `3.3.3` [available here](https://www.avd.sh/en/releases-v3.x.x/)

## Release 3.8.1

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Update Schema for OSPF maximum paths from 32 to 128 (#2424) by @RyanM-Aristain https://github.com/aristanetworks/ansible-avd/pull/2435
- Fix(eos_cli_config_gen): Workaround for router-general EOS CLI issue (#2408) by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2436

#### Fixed issues in eos_designs

- Fix(eos_designs): Detect duplicate VLAN, VRF, VNI within network_services (#2411) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2449
- Fix(eos_designs): Renders lacp fallback when port-channel mode is passive by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2452
- Fix(eos_designs): vtep_vvtep_ip doesn't generate any config (#2442) by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/2455
- Fix(eos_designs): Fix issue with hardware_counters python code (#2447) by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2454
- Fix(eos_designs) - Remove speed from port-channel interfaces (#2463) by @carlbuchmann in (https://github.com/aristanetworks/ansible-avd/pull/2465)

### Fixed issues in eos_snapshot

- Fix(eos_snapshot): eos snapshot produces incorrect json and yaml output (#2426 & #2439) by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2434
- Fix(eos_snapshot): Conditional in tasks are not honored and support for limit (#2457) by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2460

### Update for Requirements

- Bump: Support additional ansible-core versions 2.13 and 2.14 by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2433

## Release 3.8.0

- Version 3.8.0 includes input data validation for `eos_cli_config_gen` based on data model schemas.
  By default data issues will be reported as warnings and will not block the playbook. See details [here](../../docs/input-variable-validation-BETA.md).

  Please report any problems on [Github discussions](https://github.com/aristanetworks/ansible-avd/discussions/categories/data-model-schemas),
  if it seems like the schema is wrong or too restrictive. Other feedback is also most welcome.

### Changes to requirements

- AVD now requires ansible-core from **2.11.3** to **2.12.x** excluding **2.12.0** to **2.12.5**<br>
  Excluded versions have an issue in `ansible-core`, which is [fixed](https://github.com/ansible/ansible/blob/v2.12.6/changelogs/CHANGELOG-v2.12.rst#bugfixes)
  in **2.12.6** and **2.13.1**.<br>
  If Ansible is installed using pip, a supported version can be installed with `pip3 install "ansible-core>=2.11.3,<2.13.0,!=2.12.0,!=2.12.1,!=2.12.2,!=2.12.3,!=2.12.4,!=2.12.5"`.

!!! note
    Plugin loader will now load config data for plugin by name instead of by file to avoid issues with the same file being loaded under different names (Fully-Qualified-Collection-Name + short-name).

- AVD now requires a newer version of the Python package `jsonschema>=4.5.1`.<br>
  A supported version can be installed with `pip3 install "jsonschema>=4.5.1"`.

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Optimize(eos_cli_config_gen): Remove lower method on boolean variables by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2007
- Fix(eos_cli_config_gen): documentation failure when enable isis on vlan-interface by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2076
- Fix(eos_designs,eos_cli_config_gen): Fix ipv6_address_virtual and ipv6_virtual_router by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2141
- Fix(eos_cli_config_gen): Updates to schema for policy_maps by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2177
- Fix(eos_cli_config_gen): make description, ip and gateway optional for management_interfaces by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2224
- Fix(eos_cli_config_gen): Add convert_types to router ospf area id schema (#2391) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2402
- Fix(eos_cli_config_gen): Render LLDP commands on ethernet_interfaces also for port-channel members (#2386) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2405

#### Fixed issues in eos_designs

- Fix(eos_designs): Fix the router_isis redistribute_routes connected by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2001
- Fix(eos_designs): remove the need for mgmt_gateway by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/1931
- Fix(eos_designs): Missing defined check for enable_trunk_groups by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2038
- Fix(eos_designs): Fix core_interfaces ISIS logic by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/2078
- Fix(eos_designs): fix wrong type being returned for mac_address_table aging-time by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2103
- Fix(eos_designs): `filter.only_vlans_in_use` did not configure vlans used by `network_ports` by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2104
- Fix(eos_designs): BGP Default Originate produced invalid key for route-map by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2108
- Fix(eos_designs,eos_cli_config_gen): Fix ipv6_address_virtual and ipv6_virtual_router by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2141
- Fix(eos_designs): allow ':' in the description for network_ports by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2225
- Fix(eos_designs): Create mgmt interface even if no gateway is set by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2246
- Fix(eos_designs): Python import error for AristaAvdMissingVariableError by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2295
- Fix(eos_designs): Avoid configuring "vxlan virtual-router encapsulation mac-address mlag-system-id" when not applicable by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2325
- Fix(eos_designs): Create MLAG peer-group when needed for non-BGP underlays by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2316
- Fix(eos_designs): Minor issues in new PTP feature by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/2331
- Fix(eos_designs): PTP documentation not linked from mkdocs.yml by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/2334
- Fix(eos_designs): force inband_management_vlan as integer by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2345
- Fix(eos_designs): Remove j2caching since it is unstable between versions by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2351
- Fix(eos_designs): Replace sorted with natural_sort in overlay/utils.py (#2374) by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2375
- Fix(eos_designs): overlay_rd_type with inline jinja generates incorrect config (#2393) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2403

#### Other Fixed issues

- Fix: Remove ansible-test enforced GPL3 header from modules by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2010
- Fix: Create MLAG port-channels with network_ports data model by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2011
- Fix: pr labeler action by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2051
- Fix: Update json schema by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2099
- Fix: Ensure get.avd.sh make script sets the correct UID by @jorisc90 in https://github.com/aristanetworks/ansible-avd/pull/2210
- Fix: schema auto generated documentation and json schema by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2251
- Fix(eos_validate_state): Always create directory for reports by @chetryan in https://github.com/aristanetworks/ansible-avd/pull/2261
- Fix: File permissions for documentation and schema tasks by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2292
- Fix: Incorrect table rendering for L2LS by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2318
- Fix(eos_validate_state): Handle missing  interfaces, MLAG and BGP peers by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2330
- Fix: Logging buffered default level not required (#2364) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2372
- Fix(plugins): Fix bgp_utils for ansible-test sanity and update requirements (#2401) by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2406

### Documentation

- Doc(eos_designs): specify that id must be unique within a node_type by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2014
- Doc: L2LS Example by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/1992
- Doc(eos_designs): Fix snmp_settings.compute_v3_user_localized_key typo by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2072
- Doc: L3LS Example and Mkdoc Updates by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2055
- Doc: Add Guillaume Mulocher to Maintainers by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2100
- Doc: Fix incorrect key names for custom mlag interface descriptions by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2235
- Doc: Remove display_name from schema generated docs by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2248
- Doc: Exclude test files from site build, enable twitter, update links by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2238
- Doc: Campus Example by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/2191
- Doc: Role diagram support for light and dark modes by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2272
- Doc(eos_cli_config_gen): Add LACP to key_to_display_name plugin by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2293
- Doc: Refactor landing page and installation guide by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2306
- Doc(eos_designs): Addition of L2LS documentation by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2305
- Doc: Fix code block, update variable information by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/2339
- Doc: Fix Images in Campus Fabric Example by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/2348
- Doc(eos_cli_config_gen): Fix documentation for cvx.peer_hosts by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2358

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add support for sub-route-map and continue in route-maps by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/1850
- Feat(eos_cli_config_gen): add support for SSL profile cipher-list by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2000
- Feat(eos_cli_config_gen): Support mcs cvx server commands by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/1985
- Feat(eos_cli_config_gen): Support for MCS client commands by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/1999
- Feat(eos_cli_config_gen): Add shutdown knob to MCS client commands by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/2009
- Feat(eos_cli_config_gen): Support for setting queue-monitor length cpu thresholds by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2012
- Feat(eos_cli_config_gen): Add support for mtu under management interface by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/2080
- Feat(eos_cli_config_gen): add cvconfig flag to TerminAttr by @perimore in https://github.com/aristanetworks/ansible-avd/pull/2217
- Feat(eos_cli_config_gen): Support no queue-monitor length notifying by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2253
- Feat(eos_cli_config_gen): Add various config options for Sflow by @ccsnw in https://github.com/aristanetworks/ansible-avd/pull/2249
- Feat(eos_designs,eos_cli_config_gen): Add "disabled" option to "local_users" by @gusmb in https://github.com/aristanetworks/ansible-avd/pull/2257
- Feat(eos_cli_config_gen): Add key_type for ntp.authentication_keys by @philippebureau in https://github.com/aristanetworks/ansible-avd/pull/2258
- Feat(eos_cli_config_gen): Add "bfd" key to router_pim_sparse_mode by @gusmb in https://github.com/aristanetworks/ansible-avd/pull/2262
- Feat(eos_cli_config_gen): Add flow tracking sampled support by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2270
- Feat(eos_cli_config_gen): Add tunnel interface functionality by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2260
- Feat(eos_cli_config_gen): Add schema for ntp by @KonikaChaurasiya-GSLab in https://github.com/aristanetworks/ansible-avd/pull/2151
- Feat(eos_cli_config_gen): Source-interface for management cvx by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/2294
- Feat(eos_cli_config_gen):  Add macsec commands by @gusmb in https://github.com/aristanetworks/ansible-avd/pull/2286
- Feat(eos_cli_config_gen): Fix macsec template by @gusmb in https://github.com/aristanetworks/ansible-avd/pull/2297
- Feat(eos_cli_config_gen): Add support for EVPN multicast ipv4 AF transit by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/2277
- Feat(eos_cli_config_gen): MAC address on management interfaces by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/2275
- Feat(eos_cli_config_gen): Support route_reflector_client key on BGP neighbors by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/2298
- Feat(eos_cli_config_gen): Add graceful-restart support for router_bgp by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2296
- Feat(eos_cli_config_gen): Add Router MSDP Data Model by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/2278
- Feat(eos_cli_config_gen, eos_designs): Support Track BFD in static routes by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2320
- Feat(eos_cli_config_gen): Support access-lists & options on rp addresses by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2355

#### New features and enhancements in eos_designs

- Feat(eos_designs): Auto BGP ASN by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/1948
- Feat(eos_designs): Support for Static Flood Lists, HER by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1982
- Feat(eos_designs): Support structured config under network services svis and l2vlans for bgp commands by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1947
- Feat(eos_designs): Support for custom naming of trunk groups by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2021
- Feat(eos_designs): Support static_routes for default vrf  under network-services by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1986
- Feat(eos_designs): Optional underlay eBGP filtering of paths with peer's ASN by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2030
- Feat(eos_designs): Add channel_id for endpoints by @chetryan in https://github.com/aristanetworks/ansible-avd/pull/2070
- Feat(eos_designs): Support the ip_virtual_router_addresses and ip_address_virtual under the same svi by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2239
- Feat(eos_designs): Add support for setting node_type by matching regexes against the hostname by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/2266
- Feat(eos_designs): Support for PTP configuration based on best practices by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1916
- Feat(eos_designs): Add support for system mac address derived engine ID by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2289
- Feat(eos_designs): Add support for multiple descriptions for l3_interfaces by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2291
- Feat(eos_designs): EVPN to MPLS-VPN Gateway Overlay Support by @emilarista in https://github.com/aristanetworks/ansible-avd/pull/2209
- Feat(eos_designs): EVPN Multicast L3 (OISM) Support by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/2276
- Feat(eos_cli_config_gen,eos_designs): Support Track BFD in static routes by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/2320
- Feat(eos_designs): Adding 7020R to plattform settings by @tweippert in https://github.com/aristanetworks/ansible-avd/pull/2356

#### Other new features and enhancements

- Feat: Schemas for input validation and documentation by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1888
- Feat(plugins): Add schema support for secondary_key by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2034
- Feat(plugins): New arista.avd.include_vars plugin by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2040
- Feat(plugins): AVD to JSON Schema Converter by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2090
- Feat(plugins,eos_cli_config_gen): add bgp_encrypt filter bgp password by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/2207
- Feat(eos_validate_state): custom fan & pwr states by @chetryan in https://github.com/aristanetworks/ansible-avd/pull/2222
- Feat(eos_validate_state): skip lldp topology for shutdown by @chetryan in https://github.com/aristanetworks/ansible-avd/pull/2221
- Feat(plugins): Add schema support for auto-conversion of floats by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/2247
- Feat: Add peer hosts to CVX by @sugetha24 in https://github.com/aristanetworks/ansible-avd/pull/2281

## Release 3.7.0

### Changes to requirements

- AVD now requires the Python package `deepmerge>=1.0.1`.<br>
  A support version can be installed with `pip3 install "deepmerge>=1.0.1"`.

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): add vlan.vni var is defined by @lermilov in https://github.com/aristanetworks/ansible-avd/pull/1919
- Fix(eos_cli_config_gen): print the vlans in alphabetical order for `router bgp` by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/1925
- Fix(eos_cli_config_gen): Rendering of dot1x cli by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1924
- Fix(eos_cli_config_gen): Re-add seperator between VRF and non-VRF config by @ccsnw in https://github.com/aristanetworks/ansible-avd/pull/1961

#### Fixed issues in eos_designs

- Fix(eos_designs): fix logic for underlay_multicast by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1940
- Fix(eos_designs): fix the Loopback0 interface description by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1955
- Fix(eos_designs): Resolve inline jinja in fabric_name by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1967
- Fix(eos_designs): Correct underlay routing for overlay_routing_protocol: "none" by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1970
- Fix(eos_designs): Remove unneeded mlag ibgp vlan for vrf default by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1968
- Fix(eos_designs): Only configure EVPN filtering on EVPN nodes by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1969
- Fix(eos_designs): only create igmp snooping querier configuration on l3 devices by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1978
- Fix(eos_designs): Missing IGP no-passive for single MLAG VLAN by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1974
- Fix(eos_designs): return the missing node_type in error by @pvinci-arista in https://github.com/aristanetworks/ansible-avd/pull/1981

#### Other Fixed issues

- Fix: typos by @matthewgottlieb in https://github.com/aristanetworks/ansible-avd/pull/1957

### Documentation

- Doc(eos_designs): Add documentation for mlag_ibgp_origin_incomplete by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1904
- Doc: Add proper installation guide links on README by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1915
- Doc: Update AVD Core team by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1920
- Doc: AVD beginner TOI update to be consistent with AVD examples by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1908
- Doc: Minor fixes in getting-started docs by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1934
- Doc(eos_designs): change adapters.mode to Optional by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/1937
- Doc: Minor doc changes by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1935
- Doc: (eos_snapshot): fix var name in input example by @matthewgottlieb in https://github.com/aristanetworks/ansible-avd/pull/1960
- Doc: mkdoc updates with layouts, font, material theme, and syntax highlighting by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/1951
- Doc: refactoring by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/1952
- Doc: Heading Updates by @JulioPDX in https://github.com/aristanetworks/ansible-avd/pull/1991

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): BGP VPN-IPv4/v6 SAFI route-map and match failure discard by @sengarth in https://github.com/aristanetworks/ansible-avd/pull/1851
- Feat(eos_cli_config_gen): add ip helper to Ethernet interface by @pvinci-arista in https://github.com/aristanetworks/ansible-avd/pull/1844
- Feat(eos_cli_config_gen): add support for logging event congestion-drops by @gmuloc in https://github.com/aristanetworks/ansible-avd/pull/1933
- Feat(eos_cli_config_gen): Enhance support for PTP monitoring by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1921
- Feat(eos_cli_config_gen): router bgp link-bandwidth by @marcusmcpeek in https://github.com/aristanetworks/ansible-avd/pull/1950
- Feat(eos_cli_config_gen): Support multicast routing under ethernet and vlan interfaces by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1959

#### New features and enhancements in eos_designs

- Feat(eos_designs):  knob to enable multicast in underlay by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1899
- Feat(eos_designs): Single-Active EVPN Multihoming by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/1864
- Feat(eos_designs): Add support for trunk_groups by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1826
- Feat(eos_designs): BGP peer groups in VRFs by @xaviramon in https://github.com/aristanetworks/ansible-avd/pull/1663
- Feat(eos_designs): Add network_ports data model for large scale port configurations by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1910
- Feat(eos_designs): Support automatic BGP peer groups without nodes by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1914
- Feat(eos_designs): Support for structured_config on bgp_peer_groups by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1905
- Feat(eos_designs): Automatic uplink/downlink/mlag peer-link allocation by @jonxstill in https://github.com/aristanetworks/ansible-avd/pull/1758
- Feat(eos_designs): Native dot1x support for connected_endpoints by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/1932
- Feat(eos_designs): Fabric EVPN multicast by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1922
- Feat(eos_designs): Support different ipv4 pool for mlag ibgp peerings by @tgodaA in https://github.com/aristanetworks/ansible-avd/pull/1819
- Feat(eos_designs): Add none as a valid value for underlay and underlay protocol by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/1939
- Refactor(eos_designs)!: MPLS Peer Logic by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1906
- Feat(eos_designs): Add l2ls default node type key and template by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/1938
- Feat(eos_designs): Support all keys with svi_profiles by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1941
- Feat(eos_designs): igmp querier in network services by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1958
- Feat(eos_designs): support switch_id and offset in rd admin subfield by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1977
- Feat(eos_designs): Support Pure L2 Spine in L2LS by @mthiel117 in https://github.com/aristanetworks/ansible-avd/pull/1983
- Feat(eos_designs): evpn l2 multicast in network services by @carlbuchmann in https://github.com/aristanetworks/ansible-avd/pull/1907
- Feat(eos_designs): Only configure vlans in use by connected endpoints or downstream L2 switches by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1821
- Feat(eos_designs): custom_templates_extra_vars by @ClausHolbechArista in https://github.com/aristanetworks/ansible-avd/pull/1989

#### Other new features and enhancements

- Feat: Add AVD Example single-dc-l3ls by @nielsjlarsen in https://github.com/aristanetworks/ansible-avd/pull/1849

## Release 3.6.0

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): VRF BGP neighbor allowas_in.enabled renders invalid config by @emilarista in #1891

#### Fixed issues in eos_designs

- Fix(eos_designs): Failure with OSPF underlay and mlag_peer_l3_vlan == mlag_peer_vlan by @pvinci-arista in #1842
- Fix(eos_designs): Correct pruning of vlans when no vlans are allowed by @ClausHolbechArista in #1879
- Fix(eos_designs, eos_cli_config_gen): Fix the AVD version print in virtual environments by @tgodaA in #1876
- Fix(eos_designs): Wrong passive interfaces rendered under OSPF process by @emilarista in #1893

#### Other Fixed issues

- Fix(eos_validate_state): Follow alphabetical order on generated reports by @xaviramon in #1867

### Documentation

- Doc(eos_config_deploy_cvp): fix the defaults values in README by @gmuloc in #1902

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): enable global dot1x functionality by @mthiel117 in #1801
- Feat(eos_cli_config_gen): Support bgp additional-paths in router_bgp vrf address-families by @tgodaA in #1854
- Feat(eos_cli_config_gen): Support bfd vtep evpn commands by @tgodaA in #1857
- Feat(eos_cli_config_gen): Add support for OSPF BFD sessions for adjacencies in any state by @pvinci-arista in #1830
- Feat(eos_designs,eos_cli_config_gen): support 'switchport trunk native vlan tag' config by @gmuloc in #1871
- Feat(eos_cli_config_gen): Add ip_directed_broadcast to vlan_interfaces by @lermilov in #1896
- Feat(eos_cli_config_gen): Support bgp missing-policy under router bgp vrf address-families by @tgodaA in #1897
- Feat(eos_cli_config_gen): Route redistribution under router isis by @sengarth in #1811
- Feat(eos_cli_config_gen): SBFD configuration under Router BFD and SR-TE policy #1802 by @sengarth in #1808

#### New features and enhancements in eos_designs

- Feat(eos_designs): Support for short_esi: auto in port profiles & use of new eos_cli_config_gen data model by @jonxstill in #1834
- Feat(eos_designs): Support raw_eos_cli key on core_interfaces by @emilarista in #1862
- Feat(eos_designs): add support for 7300X3 in default platforms by @gmuloc in #1863
- Feat(eos_designs): Support for computing SNMP v3 engineid and hashes by @gmuloc in #1868
- Feat(eos_designs): Relax requirement of node-specific configuration by @ClausHolbechArista in #1827
- Feat(eos_designs):  Structured configuration support for uplink and mlag interfaces by @carlbuchmann in #1865
- Feat(eos_designs,eos_cli_config_gen): support 'switchport trunk native vlan tag' config by @gmuloc in #1871

#### Other new features and enhancements

- Feat(eos_snapshot): Support for commands containing / character by @emilarista in #1838

## Release 3.5.0

### Change to requirements

- Bump(requirements): Relax ansible.netcommon requirements to ">=2.4.0,!=2.6.0" by @gmuloc in #1836

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Documentation template for IPv6 on port-channels by @ClausHolbechArista in #1715
- Fix(eos_cli_config_gen): Adjust the address-family evpn host-flap detection by @tgodaA in #1728
- Fix(eos_cli_config_gen): Render error-correction encoding on port-channel members by @ClausHolbechArista in #1800

#### Fixed issues in eos_designs

- Fix(eos_designs): Fix IPv6 static routes tenants by @onurgashi in #1778
- Fix(eos_designs): ipv6_underlay should not apply for l2 switches by @ClausHolbechArista in #1812
- Fix(eos_designs): Error in eos_designs_facts when dot in hostname by @ClausHolbechArista in #1816

#### Other Fixed issues

- Fix(plugins): convert_dicts resolve corner case with dictionary with invalid value by @carlbuchmann in #1777

### Documentation

- Doc: Fix typo in release-notes for v3.4.0 by @ClausHolbechArista in #1698
- Doc: Update links to github documentation by @ClausHolbechArista in #1713
- Doc: Remove CI badge by @carlbuchmann in #1736
- Doc: Minor Corrections on Documentation by @JulioPDX in #1751
- Doc: Improve documentation, fix typo by @danieltudares in #1749
- Doc(eos_designs): add precisions regarding eos_designs and eos_cli_config_gen variables by @gmuloc in #1743
- Doc: Network services data model in v4.0 mpls docs by @Shivani-chourasiya in #1794
- Doc(eos_cli_config_gen): Improve documentation for router_general by @gmuloc in #1829

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): add VRRP support for object tracking by @ccsnw in #1637
- Feat(eos_cli_config_gen): Add eos_cli for loopback_interfaces by @UchihaItachiSama in #1707
- Feat(eos_cli_config_gen): Add eos_cli for loopback_interfaces by @UchihaItachiSama in #1707
- Feat(eos_cli_config_gen): dot1x-reauthentication by @mthiel117 in #1700
- Feat(eos_cli_config_gen): Support interfaces snmp trap link-change by @tgodaA in #1703
- Feat(eos_cli_config_gen): Support platfom sand qos-mapping by @tgodaA in #1686
- Feat(eos_cli_config_gen): Added support for CVX client by @sugetha24 in #1682
- Feat(eos_designs, eos_cli_config_gen): Support default-services in management-api-http by @tgodaA in #1704
- Feat(eos_cli_config_gen): dot1x-pae-mode by @mthiel117 in #1722
- Feat(eos_cli_config_gen): Support Aboot password by @tgodaA in #1691
- Feat(eos_cli_config_gen): Aegis Traffic Policies on Interfaces by @emilarista in #1638
- Feat(eos_cli_config_gen): VRRP timer delay and IPv4 version options by @c-po in #1706
- Feat(eos_cli_config_gen): Extend logging format timestamp options by @ccsnw in #1709
- Feat(eos_cli_config_gen): Support remove-private-as in router_bgp by @tgodaA in #1666
- Feat(eos_cli_config_gen): Adding support for ssl profile for gnmi by @noredistribution in #1747
- Feat(eos_cli_config_gen): add SNMPv3 hashed user passphrases support by @gmuloc in #1721
- Feat(eos_cli_config_gen): Extend listen_range support for BGP by @ccsnw in #1735
- Feat(eos_cli_config_gen): Add support for multiple dot1x interface features by @mthiel117 in #1739
- Feat(eos_cli_config_gen): Support for multiple VARPv6 addresses by @onurgashi in #1761
- Feat(eos_cli_config_gen): BGP VRF IPv4 RM support by @danieltudares in #1763
- Feat(eos_cli_config_gen): Add BGP listen-range to VRF by @ccsnw in #1779
- Feat(eos_cli_config_gen): Add Tap Aggregation support by @ccsnw in #1737
- Feat(eos_cli_config_gen): Add management_api_models by @UchihaItachiSama in #1724
- Feat(eos_cli_config_gen): Add support for authenticating only ntp servers by @UchihaItachiSama in #1810
- Feat(eos_cli_config_gen): Add BGP neighbor interfaces in VRF by @onurgashi in #1817
- Feat(eos_cli_config_gen): Add sflow interface disable default command by @xaviramon in #1823
- Feat(eos_cli_config_gen): add PIM sparse-mode interfaces in doc by @gmuloc in #1848

#### New features and enhancements in eos_designs

- Feat(eos_designs): Add platform settings for 7368X4 by @gmuloc in #1690
- Feat(eos_designs, eos_cli_config_gen): Support default-services in management-api-http by @tgodaA in #1704
- Feat(eos_designs): Support evpn hostflap detection expiry by @tgodaA in #1733
- Feat(eos_designs): Custom name for underlay isis process by @emilarista in #1731
- Feat(eos_designs): EVPN VXLAN gateway feature by @xaviramon in #1601
- Feat(eos_designs): Auto short_esi support for connected_endpoints and l2leaf uplinks (#1609) by @jonxstill in #1738
- Feat(eos_designs): Support for IPv6 in underlay with RFC5549 by @xaviramon in #1723
- Feat(eos_designs): Support for IPv6 overlay peerings with RFC5549 underlay by @xaviramon in #1719
- Feat(eos_designs): RFC5549 support for core_interfaces by @emilarista in #1741
- Feat(eos_designs): Enable RTC for EVPN-OVERLAY-CORE peer group by @onurgashi in #1775
- Feat(eos_designs): Support for Ipv6 network services by @onurgashi in #1760
- Feat(eos_designs): Add ability to set mlag port-channel id by @ClausHolbechArista in #1789
- Feat(eos_designs): RFC5549 for MLAG iBGP in VRF by @onurgashi in #1818
- Feat(eos_designs): Shutdown underlay links if the peer device is not deployed by @perimore in #1745

#### Other new features and enhancements

- Feat(plugins): Updated convert_dicts filter for list values in dictionary by @Shivani-chourasiya in #1694
- Feat(plugins): Updated convert_dicts filter for list/string values in dictionary by @Shivani-chourasiya in #1740
- Feat(eos_config_deploy_cvp): support for !vault value in inventory file by @gmuloc in #1799

## Release 3.4.0

Notable changes are listed below. For a complete list of changes see the [Release](https://github.com/aristanetworks/ansible-avd/releases/tag/v3.4.0) on GitHub.

### Data model modifications (non-breaking)

This section provides an overview of the data model that have ***changed*** from the previous release, but are backwards compatible.

No changes are required for existing deployments.

#### Changes to eos_designs role

- **Fabric variables:**

  - `bgp_peer_groups.IPv4_UNDERLAY_PEERS` has been renamed to `bgp_peer_groups.ipv4_underlay_peers` to avoid upper-case variables. The old key is still supported.
  - `bgp_peer_groups.MLAG_IPv4_UNDERLAY_PEER` has been renamed to `bgp_peer_groups.mlag_ipv4_underlay_peer` to avoid upper-case variables. The old key is still supported.
  - `bgp_peer_groups.EVPN_OVERLAY_PEERS` has been renamed to `bgp_peer_groups.evpn_overlay_peers` to avoid upper-case variables. The old key is still supported.

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): dhcp relay missing ! by @ryanmerolle in #1576
- Fix(eos_cli_config_gen): logging config order by @ryanmerolle in #1577
- Fix(eos_cli_config_gen): port_channel_interface mlag config order by @ryanmerolle in #1580
- Fix(eos_cli_config_gen): vlan_interface virtual ip config order by @ryanmerolle in #1579
- Fix(eos_cli_config_gen): aaa config order by @ryanmerolle in #1578
- Fix(eos_cli_config_gen): dns config reorder by @ryanmerolle in #1589
- Fix(eos_cli_config_gen): Allow no logging source-interface in VRFs by @ClausHolbechArista in #1597
- Fix(eos_cli_config_gen): mgmt config order by @ryanmerolle in #1598
- Fix(eos_cli_config_gen): Ethernet Interface Config Order by @ryanmerolle in #1599
- Fix(eos_cli_config_gen): router bgp config order by @ryanmerolle in #1603
- Fix(eos_cli_config_gen): community-list config order by @ryanmerolle in #1607
- Fix(eos_cli_config_gen): no icmp redirect config order by @ryanmerolle in #1608
- Fix(eos_cli_config_gen): Remove sorting on class-maps in policy-maps type qos by @carlbuchmann in #1611
- Fix(eos_cli_config_gen): fix the dual-primary recovery delay if check by @tgodaA in #1652
- Fix(eos_cli_config_gen): ethernet interface documentation output by @carlbuchmann in #1661

#### Fixed issues in eos_designs

- Fix(eos_designs): Remove unneeded j2lint ignore by @emilarista in #1584
- Fix(eos_designs): Check for network_services_l3:true when creating iBGP peering in overlay VRFs by @UchihaItachiSama in #1650

#### Fixed issues in eos_validate_state

- Fix(eos_validate_state): additional check in generate vars by @ankudinov in #1623
- Fix(eos_validate_state): Failures on shutdown interfaces by @perimore in #1585
- Fix(eos_validate_state): bugs and refactor by @xaviramon in #1588

#### Other Fixed issues

- Fix: Updated j2 templates to fix jinja single-statement-per-line error by @Shivani-chourasiya in #1569
- Fix(plugins): Issue in convert_dicts with empty dictionary values by @ClausHolbechArista in #1642

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add support for bgp neighbor peer filter by @danieltudares in #1558
- Feat(eos_cli_config_gen): Add dr_priority to pim ipv4 configuration on interface by @ryanmerolle in #1560
- Feat(eos_cli_config_gen): Add router_bgp rib-in pre-policy retain to eos_cli_config_gen by @ryanmerolle in #1559
- Feat(eos_cli_config_gen): interface bfd echo by @ryanmerolle in #1571
- Feat(eos_cli_config_gen): router multicast ipv4 counters support by @ryanmerolle in #1582
- Feat(eos_cli_config_gen): Add support for changing the notification timestamp mode for gnmi (Issues/1532) by @noredistribution in #1533
- Feat(eos_cli_config_gen): add support for FlexRoute compression and expansion of prefixes by @c-po in #1621
- Feat(eos_cli_config_gen): Add support for ebgp_multihop under bgp neighbors by @ccsnw in #1633
- Feat(eos_cli_config_gen): Support for show tech-support policy (#1617) by @c-po in #1618
- Feat(eos_cli_config_gen): add support for object tracking by @ccsnw in #1629
- Feat(eos_cli_config_gen): FlexRoute - add support for TCAM assisted ACLs #1656 by @c-po in #1657
- Feat(eos_cli_config_gen): Support multiple VRRP VRID per interface by @c-po in #1648
- Feat(eos_cli_config_gen): Hardware Accelerated Sflow by @emilarista in #1640
- Feat(eos_cli_config_gen): Support bpduguard rate-limit by @tgodaA in #1667
- Feat(eos_cli_config_gen): add dynamic prefix-lists by @ryanmerolle in #1676
- Feat(eos_cli_config_gen): router_multicast rpf route by @ryanmerolle in #1675
- Feat(eos_cli_config_gen): dot1x-port-control by @mthiel117 in #1679
- Feat(eos_cli_config_gen): Add new and improved ip_community_lists model by @ankudinov in #1651
- Feat(eos_cli_config_gen): router_general routes dynamic prefix-list by @ryanmerolle in #1677

#### New features and enhancements in eos_designs

- Feat(eos_designs): Add description to MLAG BGP peer on VRFs by @xaviramon in #1537
- Feat(eos_designs): macsec support fabric links #1506 by @ankudinov in #1538
- Feat(eos_designs): Support default vrf in Network Services by @tgodaA in #1499
- Feat(eos_designs): l3ls: svi_profiles should support referencing a base svi_profile by @c-po in #1531
- Feat(eos_designs): Add mpls design type (BETA) by @emilarista in #1418
- Feat(eos_designs): Change bgp_peer_groups to lower-case by @ClausHolbechArista in #1594
- Feat(eos_designs): Add support for network_services_keys by @melkypie in #1350
- Feat(eos_designs): Default value "all" for l2vlans.tags and svis.tags by @ClausHolbechArista in #1649

#### Other new features and enhancements

- Feat(plugins): Add arista.avd.range_expand filter by @ClausHolbechArista in #1586
- Feat: Add Execution environment files for ansible-builder by @ClausHolbechArista in #1583
- Feat: Print AVD collection version in role tasks by @ClausHolbechArista in #1647

## Release 3.3.3

### Fixed issues

- d0e081944 Fix: Set requirement for ansible.netcommon to <2.6 (#1557)
- 177957356 Fix(eos_designs): Feature interaction issues with evpn_services_l2_only (#1556)
- f60a7f5db Doc(eos_designs): Fix missing max_parallel_uplinks (#1551)

## Release 3.3.2

### Fixed issues

- c14233140 Fix(eos_validate_state): Report generation fails if LLDP tests fail (#1543)
- ab4c05ffc Doc(eos_designs): Fix typos in Monitor Session Documentation (#1535)

## Release 3.3.1

### Fixed issues

- a6434aa9c Fix: collection ansible-test linting issues (#1520)

## Release 3.3.0

### Data model modifications (non-breaking)

This section provides an overview of the data model that have ***changed*** from the previous release, but are backwards compatible.

No changes are required for existing deployments.

See the release notes and role documentation for all new additions.

#### Changes to eos_designs role

- **Network Services variables:**

  - `evpn_rt_type` has been renamed to `overlay_rt_type` as part of preparations for MPLS design. The old key is still supported.
  - `evpn_rd_type` has been renamed to `overlay_rd_type` as part of preparations for MPLS design. The old key is still supported.
  - `vxlan_vlan_aware_bundles` has been renamed to `evpn_vlan_aware_bundles` as part of preparations for MPLS design. The old key is still supported.

### Change to requirements

The Ansible Collection `community.general` is no longer required by the `arista.avd` collection. This means that `community.general` will no longer be installed automatically by `ansible-galaxy`commands.

If your project use components in `community.general` like callbacks (ex. `yaml`), you must ensure that this collection is installed.

Existing installations will not be affected by this, since `community.general` would already be installed.

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- 3e629d762 Fix(eos_cli_config_gen): Fix name-servers jinja templates to allow non-vrf servers (#1451)
- 3b163deeb Fix(eos_cli_config_gen): Fix logic in daemon_terminattr (#1485)
- 5a8c5bb18 Fix(eos_cli_config_gen): Block delimers between Extended IPv4 ACLs (#1481)
- c97937dbe Fix(eos_cli_config_gen): BGP IPv6 AF redistribute_route_cli bug (#1471)

#### Fixed issues in eos_designs

- 2b116873a Fix(eos_designs): Remove ibgp from underlay_routing_protocol (#1416)
- 21186e800 Fix(eos_designs): Pull endpoint interface information from combined adapter+port profile settings (#1483)
- 93556efb7 Fix(eos_designs): Fixing template errors and invalid config when configuring cloudvision as a service (#1470)
- c2b82fe8e Fix(eos_designs): Documentation CSVs column headings (#1492)

#### Fixed Documentation

- 0c7f9894e Doc(eos_validate_state): Update link to loopback test (#1473)
- 8fbb43f43 Doc(eos_designs): Fix markdown errors, typos and update documentation (#1402)
- 6db25275e Doc(eos_cli_config_gen): Update documentation and fix typos (#1423)
- 09de02527 Doc(eos_cli_config_gen): README, fix indention for bgp vrf address family (#1467)
- 4d5c0476c Doc(eos_cli_config_gen): OSPF network prefixes (#1421)
- 4abee6aff Doc(eos_cli_config_gen): Key exchange under management_ssh incorrectly documented in the README file (#1510)
- bc76ca254 Doc(eos_cli_config_gen): Add information about gnmi provider configured with octa (#1494)

#### Other Fixed issues

- d4ec25d6e Fix(eos_validate_state): Abstraction of VXLAN source interface (#1360)
- f47257d48 Fix(dhcp_provisioner): Fix lease_time & role doc update (#1431)

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- 9f8d26898 Feat(eos_cli_config_gen): Support various ip igmp snooping commands (#1464)
- 464ae572e Feat(eos_cli_config_gen): Support setting OSPF distance (#1438)
- 45d6ae733 Feat(eos_cli_config_gen): Support mac address-table notification commands (#1514)
- 7b329bd1c Feat(eos_cli_config_gen): Support for Flex Encap and l2dot1q subinterfaces (#1452)
- ec7c8c5d1 Feat(eos_cli_config_gen): Support for DHCP relay (#1439)
- b5a3f0da4 Feat(eos_cli_config_gen): Support EVPN ethernet segment options on ethernet-interfaces (#1437)
- 685169963 Feat(eos_cli_config_gen): Support disable commands of spanning-tree bpduguard and bpdufilter (#1375)
- 5ace05a47 Feat(eos_cli_config_gen): Support cos in policy-map and service-policy in qos profile (#1504)
- e117eda27 Feat(eos_cli_config_gen): port-channel-interfaces enhancement (#1396)
- de422ac54 Feat(eos_cli_config_gen): logging facility (#1490)
- 95ed0568e Feat(eos_cli_config_gen): IPv6 ACL support for QOS policy map class maps (#1515)
- 48ecb7011 Feat(eos_cli_config_gen): Improve data model for extended IP ACLs #1411 (#1424)
- 86c1f8682 Feat(eos_cli_config_gen): Extend platform sand and add documentation (#1425)
- 23a0d4abf Feat(eos_cli_config_gen, eos_designs): Support bfd in router_bgp vrf neighbors (#1445)
- 44b957883 Feat(eos_cli_config_gen): default_originate for router_bgp neighbors (#1380)
- 1c71d6987 Feat(eos_cli_config_gen): Add vpws control-word, mtu and label flow knobs (#1509)
- 2493a992c Feat(eos_cli_config_gen): add support to shutdown individual VRF neighbors in bgp (#1476)
- 335a59e4d Feat(eos_cli_config_gen): Add support for Vxlan DSCP mapping (#1462)
- 9a1be3cbd Feat(eos_cli_config_gen): Add support for TACACS AES-256-GCM keys (#1456) (#1466)
- 9a8c8378c Feat(eos_cli_config_gen): Add support for segment-routing traffic-engineering (#1486)
- db0d25005 Feat(eos_cli_config_gen): Add support for reversible encryption algorithm #1468 (#1469)
- f21e5dbad Feat(eos_cli_config_gen): Add support for OSPF Distribute List (#1442)
- 536bc64ed Feat(eos_cli_config_gen): Add support for MPLS and LDP on port-channel interfaces (#1487)
- 1fce085d9 Feat(eos_cli_config_gen): Add support for as-path filter (#1429)
- e7b0d339e Feat(eos_cli_config_gen): Add spanning_tree_guard to switched ethernet interfaces (#1460)
- a6b62e33f Feat(eos_cli_config_gen): Add PIM RP addresses on VRF instance (#1484)
- 6b69e6405 Feat(eos_cli_config_gen): Add Monitor Session support (#1435)
- 6566afd12 Feat(eos_cli_config_gen): Add MAC ACL support to Ethernet and Port-channels (#1422)
- 3f0dae75c Feat(eos_cli_config_gen): Add lldp tlv transmit ztp vlan (#1458)
- 30a40780a Feat(eos_cli_config_gen): Add ISIS authentication and hello padding (#1453)
- a7c3b49d9 Feat(eos_cli_config_gen): Add fast-failover and router-id support under router general (#1495)
- 52e981423 Feat(eos_cli_config_gen): Added support for PFC under ethernet_interf (#1398)
- 85062dee5 Feat(eos_cli_config_gen): Add additional router_bgp options (#1366)
- c73c68ea8 Feat(eos_cli_config_gen): AAA: add option for group access per privilege level  (#1389)

#### New features and enhancements in eos_designs

- 7ae696939 Feat(eos_designs): Support OSPF routing in tenant VRFs (#1401)
- 76d348053 Feat(eos_designs): Support EVPN multihoming features link-tracking and lacp port-id range (#1441)
- 762424f9b Feat(eos_designs): Add Monitor Session support (#1472)
- 72ee0c854 Feat(eos_designs): Add local user ssh key support (#1410)
- 7b54a2fe2 Feat(eos_designs): Add L2 subinterface support on port-channels under Connected-endpoints (#1496)
- 5bbd63719 Feat(eos_designs): Add extra ID options to network services and rename rd/rt vars (#1488)

#### New Documentation

- d39775df7 Doc(how-to): AVD beginner TOI (#1265)

#### Other new features and enhancements

- e4e9e1441 Refactor(eos_validate_state): Refactor validation-report generation (#1493)
- 5c2313421 Refactor(eos_designs, eos_cli_config_gen, eos_validate_state): structured_config file generation, json support (#1478)
- 8a0b0c408 Optimize(plugins): Optimize the esi_management filter with join (#1477)
- b1171b2a5 Feat(plugins): Add var_type 'bool' to arista.avd.defined filter (#1474)
- f9294a73d Feat(plugins): Add debug and  file options to yaml_template_to_facts (#1457)
- 3e2b5ddbb Cut: Requirement for community.general (#1516)

### Contributors

22 contributors

@ankudinov
@c-po
@carlbuchmann
@ccsnw
@ClausHolbechArista
@emilarista
@gusmb
@idrisFoughali
@jonxstill
@kmueller68
@KonikaChaurasiya-GSLab
@manuwelakanade
@nielsjlarsen
@PhirePhly
@RyanM-Arista
@sengarth
@Shivani-chourasiya
@sugetha24
@tgodaA
@titom73
@UchihaItachiSama
@xaviramon

Thank you to everyone who contributed to this release.

## Release 3.2.1

### Fixed issues

#### Fixed issues in eos_designs

- e3740ea7f Fix(eos_designs): Fix ip_helpers when defined under tenant vrf (#1417)
- 21a0357b5 Fix(eos_designs): Management interface renders incorrectly when set other than default (#1414)

## Release 3.2.0

### Fixed issues

#### Fixed issues in eos_cli_config_gen

- e93f48da Fix(eos_cli_config_gen): fix issue 1352 (#1364)
- 0c40b5d0 Fix(eos_cli_config_gen): Port-channel can use LACP fallback configuration on physical interface (#1335)

#### Fixed issues in eos_designs

- 8974bb3d Fix(eos_designs): Honor evpn_services_l2_only setting (#1394)
- 5d83e81d Fix(eos_designs): `mlag xx` is rendered on port-channels to servers even when switches do not run mlag. (#1356)

#### Fixed issues in eos_config_deploy_cvp

- 49bb10f9 Fix(eos_config_deploy_cvp): avoid making CV_DEVICES becoming None (#1300)

#### Documentation

- 65f00470 Doc(eos_cli_config_gen): Add Documentation for Clock Timezone (#1338)
- 64084c5b Doc(eos_cli_config_gen): Add Documentation for Management Console (#1332)
- 20080561 Doc(eos_cli_config_gen): Add no autostate to readme (#1383)
- aaa100ac Doc(eos_designs): Minor documentation fixes (#1393)
- 80427bd4 Doc: Fix typos and documentation errors (#1334)
- 32667912 Doc: Update CSS for better dark mode rendering (#1337)

### New Features and enhancements

#### New features and enhancements in eos_cli_config_gen

- 4da5e9dd Feat(eos_cli_config_gen): Add AAA Authentication Policy Lockout (#1351)
- 02ffda88 Feat(eos_cli_config_gen): Add bandwidth_guaranteed_percent for QoS Profiles. (#1331)
- dbd9abfa Feat(eos_cli_config_gen): Add BGP vpws support (#1254)
- dd1d46db Feat(eos_cli_config_gen): Add EVPN DCI Gateway Support (#1391)
- a8a07065 Feat(eos_cli_config_gen): Add EVPN Neighbor Default Encapsulation (#1258)
- 76526739 Feat(eos_cli_config_gen): Add loopback node-SID for ISIS-SR (#1255)
- ca0c8fc5 Feat(eos_cli_config_gen): Add options to disable logging (#1399)
- faf40ff4 Feat(eos_cli_config_gen): Add password minimum length to Management Security (#1344)
- 96b9ad3e Feat(eos_cli_config_gen): Add support for IPv6 address virtual in vlan_interfaces (#1312)
- 2a224e08 Feat(eos_cli_config_gen): Enhancements to IS-IS data model (#1229)
- f9b5c69d Feat(eos_cli_config_gen): enhance router multicast data model (#1367)
- 9d93d765 Feat(eos_cli_config_gen): Enhance vlan_interfaces commands (arp_*) (#1346)
- 9df8dcb5 Feat(eos_cli_config_gen): Extend LLDP Features and add Documentation (#1325)
- aedf272f Feat(eos_cli_config_gen): extend vxlan interface data model to support multicast configuration (#1368)
- bbc32b7b Feat(eos_cli_config_gen): interface vlans add ip igmp (#1388)
- 509bb2da Feat(eos_cli_config_gen): router bgp vrf evpn multicast + refactor BGP documentation (#1369)
- 5e766691 Feat(eos_cli_config_gen): Support connectivity monitor configuration (#1322)
- 117002b1 Feat(eos_cli_config_gen): Support custom User Roles (#1316)
- f6727960 Feat(eos_cli_config_gen): Support error-correction encoding on ethernet interfaces (#1376)
- 34533264 Feat(eos_cli_config_gen): Support no qos trust (#1405)
- 37b56c9b Feat(eos_cli_config_gen): Support shape rate in qos profiles (#1374)

#### New features and enhancements in eos_designs

- 4584edbe Feat(eos_designs): Add support for adapter key 'enabled' to admin shutdown interfaces (#1390)
- 404ade7b Feat(eos_designs): Customisable interface descriptions for MLAG (#1404)
- 2e1ce0f9 Feat(eos_designs): custom mlag peer link trunk allowed vlans (#1365)
- 85741e34 Feat(eos_designs): Platform management interface (#1386)
- 03d3271c Feat(eos_designs): Support MLAG interfaces speed (#1342)

#### New features and enhancements in eos_validate_state

- 1d70f252 Feat(eos_validate_state): Allowing configurable xcvr manufacturers (#1373)

### Contributors

@carlbuchmann
@ccsnw
@ClausHolbechArista
@emilarista
@idrisFoughali
@kornoa
@noredistribution
@pantunex
@PhirePhly
@pibjndata
@tgodaA
@titom73
@xaviramon

## Release 3.1.0

### Fixed issues

- Bump: collection dependencies (#1280)

#### Fixed issues in eos_designs

- Cut(eos_designs): aaa_authorization (#1298)
- Bump: Support for Ansible 2.12.0 (#1315)
- Feat(eos_designs): Support configuration of vtep_diagnostic loopback pool per POD (#1320)

#### Documentation

- Doc(cvp_configlet_upload, eos_config_deploy_cvp): Remove cvp v3 modules warning (#1305)
- Doc(eos_cli_config_gen): Replace deprecated command in documentation (#1303)
- Doc: Adding quotes to keys accepting the string value "on" (#1324)

### New Features and enhancements

#### New features and enhancements in eos_designs

- Feat(eos_designs): Support configuration of vtep_diagnostic loopback pool per POD (#1320)

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): EOS feature parity for queue_monitor_streaming (#1287)
- Feat(eos_cli_config_gen): Add BGP VRF prefix-list support (#1248) (#1249)
- Feat(eos_cli_config_gen): PBR service-policy support for routed interfaces (#1261)
- Feat(eos_cli_config_gen): Add router BFD singlehop configuration support (#1291) (#1292)
- Feat(eos_cli_config_gen): Add patch panel support (#1225)
- Feat(eos_cli_config_gen): Add support for LDP IGP sync (#1224)
- Feat(eos_cli_config_gen): Add Port-Channel ISIS commands (#1296)
- Feat(eos_cli_config_gen): Add support for interface level no lldp rx/tx commands (#1227)
- Feat(eos_cli_config_gen): add support for interface based shaping rate (#1269)
- Feat(eos_cli_config_gen): Add IS-IS circuit type on Ethernet & Port Channels interfaces (#1223)
- Feat(eos_cli_config_gen): Support LACP global configuration parameters (#1301)
- Feat(eos_cli_config_gen): Add vpn-ipv6 AF + vpn-ipv4 change (#1259)
- Feat(eos_cli_config_gen): Enable or disable specific snmp-server traps (#1294)
- Feat(eos_cli_config_gen): Link tracking in EVPN environments (#1285)

### Contributors

@carlbuchmann
@ccsnw
@ClausHolbechArista
@c-po
@emilarista
@ryanmerolle
@tgodaA

## Release 3.0.0

Provides major enhancements and data model has been updated!

!!! info "Data model Updated"
    Data model updated for roles:

        - eos_designs.
        - eos_cli_config_gen.

    Upgrade functionality has been added to the `eos_designs` role. See [README](../../roles/eos_designs/#upgrade-of-eos_designs-data-model) for details.

    Upgrade functionality has been added to the `eos_cli_config_gen` role. See [README](../../roles/eos_cli_config_gen/#upgrade-of-eos_cli_config_gen-data-model) for details.

### New Requirements

- Ansible requirements has changed to `ansible-core`. Upgrade of Ansible may require uninstall of `ansible` and `ansible-base` first.

- `ansible-core` does not include community collections. For existing projects you may need to also install `ansible` or other individual collections after installing `ansible-core`.

- Collections required for AVD 3.0.0 will be installed automatically if AVD is installed using `ansible-galaxy`. If AVD is installed via GIT clone, the extra collections can be installed with:

  ```shell
  ansible-galaxy collection install -r ansible-avd/ansible_collections/arista/avd/collections.yml
  ```

- `cvprac` must be upgraded to version 1.0.7 or higher.

  ```shell
  pip install --upgrade cvprac>=1.0.7
  ```

### Data model modifications

This section provides an overview of only the data model that have ***changed*** from the previous release that would require user modifications. See the release notes and role documentation for all new additions.

#### Changes to eos_designs role

Use the [upgrade tasks](../../roles/eos_designs/#upgrade-of-eos_designs-data-model) of `eos_designs` to assist with the transition!

- **spine variables:**

  - New `spine.defaults.uplink_switches` variable based on keys in `super_spine.nodes`
  - New `spine.defaults.isis_maximum_paths` based on max_spines * max_l3leaf_to_spine_links
  - Change from `spine.{{ var }}` to `spine.defaults.{{ var }}`
  - Change from `overlay_loopback_network_summary` to `spine.defaults.loopback_ipv4_pool`
  - Change from `spine.uplinks_to_super_spine_interfaces` to `spine.defaults.uplink_interfaces`
  - Change from `max_super_spines` to `spine.defaults.max_uplink_switches`
  - Change from `max_spine_to_super_spine_links` to `spine.defaults.max_parallel_uplinks`
  - Change from `super_spine_underlay_p2p_network_summary` to `spine.defaults.uplink_ipv4_pool`
  - Change from `p2p_uplinks_ptp` to `spine.defaults.uplink_ptp`
  - Change from `spine_bgp_defaults` to `spine.defaults.bgp_defaults`
  - Change from old default value of `spine_bgp_defaults` to `spine.defaults.bgp_defaults`
  - Change from `isis_site_id.0000` to `spine.defaults.isis_system_id_prefix`
  - Change from `mlag_ips.mlag_peer` to `spine.defaults.mlag_peer_ipv4_pool`
  - Change from `mlag_ips.mlag_peer_l3_ipv4_pool` to `spine.defaults.mlag_peer_l3_ipv4_pool`
  - Change from `spine.nodes.{{ node }}.super_spine_interfaces` to `spine.nodes.{{ node }}.uplink_switch_interfaces`

- **l3leaf variables:**

  - New `loopback_network_offset variable` based on `max_spines` or length of `spine.nodes`
  - New `l3leaf.defaults.isis_maximum_paths` based on `max_spines` * `max_l3leaf_to_spine_links`
  - Change from `overlay_loopback_network_summary` to `l3leaf.defaults.loopback_ipv4_pool`
  - Change from `vtep_loopback_network_summary` to `l3leaf.defaults.vtep_loopback_ipv4_pool`
  - Change from `l3leaf.defaults.uplink_to_spine_interfaces` to `l3leaf.defaults.uplink_interfaces`
  - Change from `l3leaf.defaults.spines` to `l3leaf.defaults.uplink_switches`
  - Change from `max_spines` to `l3leaf.defaults.max_uplink_switches`
  - Change from `max_l3leaf_to_spine_links` to `l3leaf.defaults.max_parallel_uplinks`
  - Change from `underlay_p2p_network_summary` to `l3leaf.defaults.uplink_ipv4_pool`
  - Change from `p2p_uplinks_ptp.*` to `l3leaf.defaults.uplink_ptp.*`
  - Change from `l3leaf.defaults.p2p_link_interface_speed` to `l3leaf.defaults.uplink_interface_speed`
  - Change from `mlag_ips.mlag_peer` to `spine.defaults.mlag_peer_ipv4_pool`
  - Change from `mlag_ips.mlag_peer_l3_ipv4_pool` to `spine.defaults.mlag_peer_l3_ipv4_pool`
  - Change from `leaf_bgp_defaults` to `l3leaf.defaults.bgp_defaults`
  - Change from `old default value of leaf_bgp_defaults` to `l3leaf.defaults.bgp_defaults`
  - Change from `isis_site_id.0001` to `l3leaf.defaults.isis_system_id_prefix`
  - Change from `l3leaf.node_groups.{{ node_group }}.uplink_to_spine_interfaces` to `l3leaf.node_groups.{{ node_group }}.uplink_interfaces`
  - Change from `l3leaf.node_groups.{{ node_group }}.spines` to `l3leaf.node_groups.{{ node_group }}.uplink_switches`
  - Change from `l3leaf.node_groups.{{ node_group }}.p2p_link_interface_speed` to `l3leaf.node_groups.{{ node_group }}.uplink_interface_speed`
  - Change from `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.spine_interfaces` to `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_switch_interfaces`
  - Change from `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_to_spine_interfaces` to `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_interfaces`
  - Change from `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.spines` to `l3leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_switches`

- **l2leaf variables:**

  - Change from `l2leaf.defaults.parent_l3leafs` to `l2leaf.defaults.uplink_switches`
  - Change from `l2leaf_inband_management_subnet` to `l2leaf.defaults.inband_management_subnet`
  - Change from `l2leaf_inband_management_vlan` to `l2leaf.defaults.inband_management_vlan`
  - Change from `l2leaf.defaults.p2p_link_interface_speed` to `l2leaf.defaults.uplink_interface_speed`
  - Change from `mlag_ips.mlag_peer` to `spine.defaults.mlag_peer_ipv4_pool`
  - Change from `mlag_ips.mlag_peer_l3_ipv4_pool` to `spine.defaults.mlag_peer_l3_ipv4_pool`
  - Change from `l2leaf.node_groups.{{ node_group }}.parent_l3leafs` to `l2leaf.node_groups.{{ node_group }}.uplink_switches`
  - Change from `l2leaf.node_groups.{{ node_group }}.p2p_link_interface_speed` to `l2leaf.node_groups.{{ node_group }}.uplink_interface_speed`
  - Change from `l2leaf.node_groups.{{ node_group }}.nodes.{{ node }}.l3leaf_interfaces` to `l2leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_switch_interfaces`
  - Change from `l2leaf.node_groups.{{ node_group }}.nodes.{{ node }}.parent_l3leafs` to `l2leaf.node_groups.{{ node_group }}.nodes.{{ node }}.uplink_switches`

- **super-spine variables:**

  - Change from `super_spine.{{ var }}` to `super_spine.defaults.{{ var }}
  - Change from `super_spine_loopback_network_summary` to `super_spine.defaults.loopback_ipv4_pool
  - Change from `super_spine_bgp_defaults` to `super_spine.defaults.bgp_defaults
  - Change from `old default value of super_spine_bgp_defaults` to `super_spine.defaults.bgp_defaults
  - Change in ip addressing math for P2P uplinks from spine` to `super-spine links.
    - The old model can be retained by updating` to `the v2.x.x addressing scheme:

      ```yaml
      # Node type definitions
      node_type_keys:
        spine:
          type: spine
          default_evpn_role: server
          ip_addressing:
            p2p_uplinks_ip: 'ip_addressing/avd-v2-spine-p2p-uplinks-ip.j2'
            p2p_uplinks_peer_ip: 'ip_addressing/avd-v2-spine-p2p-uplinks-peer-ip.j2'
        l3leaf:
          type: l3leaf
          connected_endpoints: true
          default_evpn_role: client
          mlag_support: true
          network_services:
            l2: true
            l3: true
          vtep: true
        l2leaf:
          type: l2leaf
          connected_endpoints: true
          mlag_support: true
          network_services:
            l2: true
          underlay_router: false
          uplink_type: port-channel
        super_spine:
          type: super-spine
        overlay_controller:
          type: overlay-controller
      ```

- **overlay-controller variables:**

  - Change from `overlay_controller.{{ var }}` to `overlay_controller.defaults.{{ var }}`
  - Change from `overlay_controller_loopback_network_summary` to `overlay_controller.defaults.loopback_ipv4_pool`
  - Change from `overlay_controller_p2p_bfd` to `overlay_controller.defaults.uplink_bfd`
  - Change from `overlay_controller.defaults.uplink_to_remote_switches` to `overlay_controller.defaults.uplink_interfaces`
  - Change from `overlay_controller.defaults.remote_switches` to `overlay_controller.defaults.uplink_switches`
  - Change from `max_overlay_controller_to_switch_links` (default=2) to `overlay_controller.defaults.max_uplink_switches`
    - (old algorithm expected max_overlay_controller_to_switch_links to be the sum of links to all uplink switches)
  - Change from `overlay_controller_p2p_network_summary` to `overlay_controller.defaults.uplink_ipv4_pool`
  - Change from `overlay_controller_bgp_defaults` to `overlay_controller.defaults.bgp_defaults`
  - Change from `old default value of overlay_controller_bgp_defaults` to `overlay_controller.defaults.bgp_defaults`
  - Change from `overlay_controller.nodes.{{ node }}.remote_switches_interfaces` to `overlay_controller.nodes.{{ node }}.uplink_switch_interfaces`
  - Change from `overlay_controller.nodes.{{ node }}.uplink_to_remote_switches` to `overlay_controller.defaults.uplink_interfaces`
  - Change from `overlay_controller.nodes.{{ node }}.remote_switches` to `overlay_controller.defaults.uplink_switches`

- **network services variable:**

  - Deprecate `evpn_rd_type.admin_subfield` == `"spine_asn"` -> use value of `spine.bgp_as`
  - Deprecate `evpn_rt_type.admin_subfield` == `"spine_asn"` -> use value of `spine.bgp_as`
  - Change `evpn_rd_type.admin_subfield` == `"leaf_asn"` to `bgp_as`
  - Change `evpn_rt_type.admin_subfield` == `"leaf_asn"` to `bgp_as`
  - Change from `tenants.{{ tenant }}.vrfs.{{ vrf }}.svis.{{ svi }}.ip_address_virtual_secondary` to `tenants.{{ tenant }}.vrfs.{{ vrf }}.svis.{{ svi }}.ip_address_virtual_secondaries`
  - Change from `svi_profiles.{{ profile }}.ip_address_virtual_secondary` to `svi_profiles.{{ profile }}.ip_address_virtual_secondaries`
  - Change from `tenants.{{ tenant }}.vrfs.{{ vrf }}.svis.{{ svi }}.ip_virtual_router_address` to `tenants.{{ tenant }}.vrfs.{{ vrf }}.svis.{{ svi }}.ip_virtual_router_addresses`
  - Change from `svi_profiles.{{ profile }}.ip_virtual_router_address` to `svi_profiles.{{ profile }}.ip_virtual_router_addresses`

- **ntp_servers:**

  - Deprecated from `eos_designs`. Replaced by `ntp` in `eos_cli_config_gen`

#### Changes to eos_cli_config_gen role

Use the [upgrade tasks](../../roles/eos_cli_config_gen/#upgrade-of-eos_cli_config_gen-data-model) of `eos_cli_config_gen` to assist with the transition!

- **vxlan_tunnel_interface variables:**

```yaml
# Old Data model

vxlan_tunnel_interface:
  Vxlan1:
    description: < description >
    source_interface: < source_interface_name >
    virtual_router:
      encapsulation_mac_address: < mlag-system-id | ethernet_address (H.H.H) >
    vxlan_udp_port: < udp_port >
    vxlan_vni_mappings:
      vlans:
        < vlan_id_1 >:
          vni: < vni_id_1 >
        < vlan_id_2 >:
          vni: < vni_id_2 >
      vrfs:
        < vrf_name >:
          vni: < vni_id_3 >
        < vrf_name >:
          vni: < vni_id_4 >

# New Data model

vxlan_interface:
  Vxlan1:
    description: < description >
    vxlan:
      source_interface: < source_interface_name >
      udp_port: < udp_port >
      virtual_router_encapsulation_mac_address: < mlag-system-id | ethernet_address (H.H.H) >
      vlans:
        < vlan_id_1 >:
          vni: < vni_id_1 >
          flood_vteps:
            - < remote_vtep_1_ip_address >
            - < remote_vtep_2_ip_address >
        < vlan_id_2 >:
          vni: < vni_id_2 >
          flood_vteps:
            - < remote_vtep_1_ip_address >
            - < remote_vtep_2_ip_address >
      vrfs:
        < vrf_name_1 >:
          vni: < vni_id_3 >
        < vrf_name_2 >:
          vni: < vni_id_4 >
      flood_vteps:
        - < remote_vtep_1_ip_address >
        - < remote_vtep_2_ip_address >
      flood_vtep_learned_data_plane: < true | false >
    # EOS CLI rendered directly on the Vxlan interface in the final EOS configuration
    eos_cli: |
      < multiline eos cli >
```

- **daemon_terminattr variables:**

```yaml
# Old data model
daemon_terminattr:
  ingestgrpcurl:
    ips:
      - < IPv4_address >
      - < IPv4_address >
      - < IPv4_address >
    port: < port_id >
  ingestauth_key: < ingest_key >
  ingestvrf: < vrf_name >
  smashexcludes: "< list as string >"
  ingestexclude: "< list as string >"
  disable_aaa: < false | true >

# New data model
daemon_terminattr:
  cvaddrs:
    - < ip/fqdn >:<port>
    - < ip/fqdn >:<port>
    - < ip/fqdn >:<port>
  clusters:
    < cluster_name >:
      cvaddrs:
        - < ip/fqdn >:<port>
        - < ip/fqdn >:<port>
        - < ip/fqdn >:<port>
      cvauth:
        method: < "token", "token-secure", "key" >
        key: < key >
        token_file: < path | e.g. "/tmp/token" >
      cvobscurekeyfile: < true | false >
      cvproxy: < URL >
      cvsourceip: < IP Address >
      cvvrf: < vrf >
  cvauth:
    method: < "token", "token-secure", "key" >
    key: < key >
    token_file: < path | e.g. "/tmp/token" >
  cvcompression: < gzip | none >
  cvobscurekeyfile: < true | false >
  cvproxy: < URL >
  cvsourceip: < IP Address >
  cvvrf: < vrf >
  cvgnmi: < true | false >
  disable_aaa: < true | false >
  grpcaddr: < string | e.g. "MGMT/0.0.0.0:6042" >
  grpcreadonly: < true | false >
  ingestexclude: < string | e.g. "/Sysdb/cell/1/agent,/Sysdb/cell/2/agent" >
  smashexcludes: < string | e.g. "ale,flexCounter,hardware,kni,pulse,strata" >
  taillogs: < path | e.g. "/var/log/messages" >
  ecodhcpaddr: < IPV4_address:port >
  ipfix: < true | false >
  ipfixaddr: < IPV4_address:port >
  sflow: < true | false >
  sflowaddr: < IPV4_address:port >
```

- **logging variables:**

```yaml
#Old data model
logging:
  vrfs:
    < vrf_name >:
      source_interface: < source_interface_name >
      hosts:
        - < syslog_server_1>
        - < syslog_server_2>

# New data model
logging:
  vrfs:
    < vrf_name >:
      source_interface: < source_interface_name >
      hosts:
        < syslog_server_1 >:
          protocol: < tcp | udp (default udp) >
          ports:
            < custom_port_1 >
            < custom_port_2 >
        < syslog_server_2 >:
          ports:
            < custom_port_1 >
```

- **snmp_server.hosts variables:**

```yaml
# Old data model
snmp_server:
  hosts:
  - host: < host IP address or name >
    vrf: < vrf_name >
    users:
      - username: < username >
        authentication_level: < auth | noauth | priv >
        version: < 1 | 2c | 3 >

# New data model
snmp_server:
  hosts:
    - host: < host IP address or name >
      vrf: < vrf_name >
      version: < 1 | 2c | 3 >
      community: < community_name >
      users:
        - username: < username >
          authentication_level: < auth | noauth | priv >
```

- **ntp_server and ntp variables:**

```yaml
# Old data models
ntp_server:
  local_interface:
    vrf: < vrf_name >
    interface: < source_interface >
  nodes:
    - < ntp_server_1 >
    - < ntp_server_2 >

ntp:
  authenticate: <true | false >
  authentication_keys:
    <key_identifier | 1-65534>:
      hash_algorithm: < md5 | sha1 >
      key: "< type7_obfuscated_key >"
  trusted_keys: "< list of trusted-keys as string ex. 10-12,15 >"

# New data model
ntp:
  local_interface:
    name: < source_interface >
    vrf: < vrf_name >
  servers:
  - name: < IP | hostname >
    burst: < true | false >
    iburst:  < true | false >
    key: < 1 - 65535 >
    local_interface: < source_interface >
    maxpoll: < 3 - 17 (logorithmic)>
    minpoll: < 3 - 17 (logorithmic)>
    preferred: < true | false >
    version: < 1 - 4 >
    vrf: < vrf_name >
  authenticate: <true | false >
  authentication_keys:
  - id: <key_identifier | 1-65534>:
    hash_algorithm: < md5 | sha1 >
    key: "< type7_obfuscated_key >"
  trusted_keys: "< list of trusted-keys as string ex. 10-12,15 >"
```

### New Features and enhancements

#### New features and enhancements in eos_designs

- Eos_designs(feature): Add support for custom `structured_config` on various `eos_designs` objects (#900)
- Feat(eos_designs): Refactor topology data models for AVD v3.0 (#1000)
- Add platform setting for `queue_monitor_length_notify_support` (#1016)
- Eos_designs(feature): Add support for vlan_aware_bundle_number_base (#1018)
- Eos_designs(refactor): rfc5549 to avoid `eos_designs` variable from being parsed in `eos_cli_config_gen` (#1019)
- Feat(eos_*):Ensure required directories are present in all roles (#1048)
- Feat(eos_designs): Implement tag for documentation (#1053)
- Add support for setting vxlan flood vtep (#980)
- Feat(eos_designs): Add all available knobs under Tenant `static_routes` (#1136)
- Refactor(eos_cli_config_gen)!: Deprecate ntp_server and expand ntp data model #1091 (#1137)
- Feat(eos_designs): Add support for reusing MLAG peer vlan for IBGP/IGP peering (#1142)
- Feat(eos_designs): Add support for setting VXLAN Source interface (#1149)
- Feat(eos_designs): Custom interface descriptions (#1156)
- Feat(eos_designs,eos_cli_config_gen): Add support for VPN import pruning (#1173)
- Feat(eos_cli_config_gen,eos_designs): Add support for setting multiple secondary virtual IP addresses for vlans (#1180)
- Feat(eos_designs): Add support for vxlan: false on svis and l2vlans (#1191)
- Optimize(eos_designs): Move upgrade into eos_designs role and optimize it a bit (#1192)
- Feat(eos_designs): Add support for no pasword in BGP sessions (#1199)
- Feat(eos_designs): interface storm-control feature can be set per platform (#1201)
- Feat(eos_designs)!: Add "VEOS" to default platform_settings (#1216)
- Refactor(eos_designs): Refactor template folders (#1263)
- Refactor(eos_designs): Refactor network_services template inclusion (#1264)

#### New features and enhancements in eos_cli_config_gen

- Add support for match_lists and using them in logging policy (#985)
- Add platform setting for `queue_monitor_length_notify_support` (#1016)
- Feat(eos_cli_config_gen): Add support for maintenance groups (#1017)
- Add support for `no logging event link-status` (#1037)
- Feat(eos_cli_config): Ensure required directories are present (#1044)
- Feat(eos_*):Ensure required directories are present in all roles (#1048)
- Feat(eos_designs): Implement tag for documentation (#1053)
- Local sshkey field added to local-users.j2 to enable sshkey definitio… (#1065)
- Feat(eos_cli_config_gen):Add support for mlag heartbeat-interval and system control-plane section (#1069)
- Feat(eos_cli_config_gen): Add OSPF timers to router ospf (#1070)
- Feat(eos_cli_config_gen):Add support for Private Vlans (#1071)
- Feat(eos_cli_config_gen): Implement OSPF inter area filtering (#1076)
- Feat:(eos_designs): Support for NSSA in Router OSPF Configuration (#1080)
- Feat(eos_cli_config_gen): Add support for transceiver media override on ethernet_interfaces (#1085)
- Feat(eos_cli_config_gen): Add single-connection to tacacs (#1095)
- Add support for setting vxlan flood vtep (#980)
- Feat(eos_cli_config_gen): Create maintenance configuration (#1020)
- Feat(eos_cli_config_gen)!: Added support for snmp v1 & snmp v2c (#1050)
- Refactor(eos_cli_config_gen)!: Update `daemon_terminattr` data model and add multi-cluster support (#1064)
- Feat(eos_cli_config_gen): Add RADIUS Source-Interface (#1118)
- Feat(eos_cli_config_gen): Http client source interface (#1119)
- Feat(eos_cli_config_gen): Vxlan interface data model updates and enhancements (#1121)
- Feat(eos_cli_config_gen): Add support for logging synchronous (#1130)
- Feat(eos_cli_config_gen): Add support for AAA accounting commands (#1132)
- Refactor(eos_cli_config_gen)!: Deprecate ntp_server and expand ntp data model #1091 (#1137)
- Feat(eos_cli_config_gen)!: Add support for non-default port and protocol under logging options (#1138)
- Feat(eos_designs,eos_cli_config_gen): Add support for VPN import pruning (#1173)
- Feat(eos_cli_config_gen,eos_designs): Add support for setting multiple secondary virtual IP addresses for vlans (#1180)
- Bump: Python 3.8 & Ansible-core 2.11.3 & action-molecule-avd 1.3 & update requirement to minimum version (#1183)
- Feat(eos_cli_config_gen): Added support for bgp neighbors send-community (#1184)
- Feat(eos_cli_config_gen): Add support for bgp neighbors maximum-routes (#1185)
- Feat(eos_cli_config_gen): Add support for AAA accounting system commands (#1187)
- Feat(eos_cli_config_gen)!: Add support for multiple virtual router addresses for vlans (#1188)
- Feat(eos_cli_config_gen): Data model upgrade feature for AVD 2.x.x to 3.0 (#1196)
- Feat(eos_cli_config_gen): Add support for SSH connection-limit (#1200)
- Feat(eos_cli_config_gen): Add support for ip ssh client source-interface (#1212)
- Feat(eos_cli_config_gen): add ACL "counters per-entry" support (#1243)

#### Enhancement of collections plugins

- Feat(plugin): Support natural sort based on item key values (#1147)
- Feat(plugin): Add var_type test to defined plugin (#1148)

#### Enhancement of documentation

- Doc(contribution): Document conventional commit approach (#1072)
- DOC: Add CI badge in README file (#1109)
- Make(mkdoc): Add support for light/dark mode  (#1112)
- [DOC]: Improve AVD documentation (#974)
- Make: Add changelog script for release-notes (#1124)
- Bump: Python 3.8 & Ansible-core 2.11.3 (#1179)
- Doc(eos_designs): Rearrange and update eos_designs documentation (#1253)
- Doc(how-to): Update documentation (#1273)

### Fixed issues

#### Fixed issues in eos_designs

- Fix(eos_designs): Add protection on switch_filter_tenants (#1122)
- Fix(eos_designs): Make options under SVI `ip_helpers` optional. (#1127)
- Fix(eos_designs): Modify default `platform_settings` for R-Series devices (#1143)
- Fix(eos_designs): Trailing zeroes removed from asdot notation ASNs (#1164)
- Fix(eos_designs,eos_cli_config_gen): Fix daemon_terminattr config with empty key (#1217)

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): AAA authentication on console fix (#1133)
- Fix(eos_cli_config_gen): Maintenance shutdown max-delay update (#1165)
- Fix(eos_designs,eos_cli_config_gen): Fix daemon_terminattr config with empty key (#1217)
- Fix(eos_cli_config_gen): Variable protection in spanning tree documentation (#1230)
- Fix(eos_cli_config_gen): daemon terminattr documentation (#1267)

#### Documentation

- Minor documentation fixes (#1038)
- Doc(mkdocs): update incorrect link to topology diagram (#1075)
- Doc(eos_cli_config_gen): Add missing documentation for `storm_control` on `port_channel_interfaces` (#1086)
- Doc(eos_cli_config_gen): Add ip_ssh_client_source_interfaces to README (#1234)
- Doc(eos_designs): Update & Cleanup fabric variables (#1169)
- Make: Deactivate minify as workaround for Read the Doc (#1197)
- Doc(eos_cli_config_gen): fix ntp release notes (#1204)
- Doc(eos_cli_config_gen): fix ntp.servers typo (#1215)
- Doc: WIP Installation section refactoring (#1241)

### Other changes

- Cut: Remove l3ls evpn role (#1276)

### Contributors

@ankudinov
@c-po
@carlbuchmann
@ClausHolbechArista
@colinmacgiolla
@daanvdsanden
@emilarista
@guillaumeVilar
@gusmb
@idrisFoughali
@ksator
@lermilov
@mthiel117
@noredistribution
@RyanM-Arista
@rainmanatee
@ryanmerolle
@sc68cal
@sengarth
@tgodaA
@titom73
@UchihaItachiSama
@quulah
@xaviramon
